<p>Admin Dashboard</p>
<% if flash[:error].present? %>
  <div class="alert alert-danger">
    <%= flash[:error] %>
  </div>
<% end %>
<% if @users.nil? %>
  <p>No users available</p>
<% else %>
  <table>
    <thead>
      <tr>
        <th>Email</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody>
      <% @users.each do |user| %>
        <% unless user.admin %>
          <tr>
          <%frame_id = dom_id(user, 'name_turbo_frame')%>
          <%= turbo_frame_tag frame_id do%>
            <td class="border px-4 py-2"><%= user.email %></td>
          <%end%>
            <td class="border px-4 py-2"><%= user.first_name %></td>
            <td class="border px-4 py-2"><%= user.last_name %></td>
            <td class="border px-4 py-2"><%= button_to user.status, update_user_status_path(user), method: :patch %></td>
          </tr>
        <% end %>
      <% end %>
    </tbody>
  </table>
<% end %>
